{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://webpack-typescript/./src/core/constants.ts","webpack://webpack-typescript/./src/core/util.ts","webpack://webpack-typescript/./src/core/toast.ts","webpack://webpack-typescript/./src/core/api.ts","webpack://webpack-typescript/./src/core/controller.ts","webpack://webpack-typescript/./src/index.ts"],"sourcesContent":["import { IDBConfig, IConstants } from \"./interfaces/others\";\r\n\r\nexport const config:IDBConfig = {\r\n  apiKey: \"AIzaSyAA8dQEt-yZnDyY3Lra8lndRJ3LWNYVW0o\",\r\n  authDomain: \"jumia-c15a3.firebaseapp.com\",\r\n  databaseURL: \"https://jumia-c15a3.firebaseio.com\",\r\n  projectId: \"jumia-c15a3\",\r\n  storageBucket: \"jumia-c15a3.appspot.com\",\r\n  messagingSenderId: \"295115190934\",\r\n  appId: \"1:295115190934:web:de0b33b53a514c3c\"\r\n}\r\n\r\nexport const gfConfig: IDBConfig = {\r\n  apiKey: \"AIzaSyCKGQw8QCq8qcxJ39QznQgarzOLP_WF1_Q\",\r\n  authDomain: \"jumia-17681.firebaseapp.com\",\r\n  databaseURL: \"https://jumia-17681.firebaseio.com\",\r\n  projectId: \"jumia-17681\",\r\n  storageBucket: \"jumia-17681.appspot.com\",\r\n  messagingSenderId: \"472156067665\",\r\n  appId: \"1:472156067665:web:976495829b072466\"\r\n}\r\n\r\nexport const constants = {\r\n  COLLECTION: \"productcomparator\",\r\n  DOCSEVENT: \"docs event\",\r\n  ABOUT: \"about\",\r\n  CONFIG: \"config\",\r\n  SEEALL: \"see all\",\r\n\r\n  SHEETNAME: \"campaign_calendar\",\r\n  NAME: \"Campaign Calendar\",\r\n  TANDCS: \"Campaign Calendar T & Cs\",\r\n  FOCUS: \"focus\",\r\n  BUILD: \"build\",\r\n  RESET: \"reset\",\r\n  TABLISTENER: \"tab listener\",\r\n  INSESSION: \"in session\",\r\n  AFTERSESSION: \"after session\",\r\n  BTWORB4SESSION: \"between or before session\",\r\n  TIMESLOTSTODISPLAY: 12,\r\n  SKUROWQUERY: \".-sku_row\",\r\n  MAINELQUERY: \".-main-el\",\r\n  FLIPPERQUERY: \".-flipper\",\r\n  FLIPPERBACKQUERY: \".-flipper .-back\",\r\n  SUPERBLOCKTITLEQUERY: \".-similar-products\",\r\n  TOASTQUERY: \".-toast\",\r\n  TOASTMSGQUERY: \".-toast .-message\",\r\n  TOASTBTNQUERY: \".-toast .-close\",\r\n  SUCCESS: \"success\",\r\n  SWITCHQUERY: \".-switcher\",\r\n  SELECTIONQUERY: \".-selection\",\r\n  SEARCHINPUTQUERY: \".-search-input\",\r\n  LIVECLASS: \"-live\",\r\n  SEARCHING: \"searching\",\r\n  OOSCLASS: \"-oos\",\r\n  TABCLASS: \"-tab\",\r\n  CATTYPE: \"category\",\r\n  DIRBTN: \"dir-btn\",\r\n  ATC: \"atc\",\r\n  COMPARE: \"compare\",\r\n  SELECTIONBTN: \"selection-btn\",\r\n  SEARCHBTN: \"search-btn\",\r\n  AM: \"am\",\r\n  PM: \"pm\",\r\n  TODAY: \"today\",\r\n  YESTERDAY: \"yesterday\",\r\n  TOMORROW: \"tomorrow\",\r\n  PREFIX: \"prefix\",\r\n  FREE: \"FREE\",\r\n  INITIATIVE: \"Campaign Calendar\",\r\n  TANDCSQUERY: \".-re.-rules\",\r\n  HOWITWORKSQUERY: \".-how-it-works\",\r\n  TOPBANNERQUERY: \".-banner.-top\",\r\n  FROMSTART: \"from start\",\r\n  CLICK: \"click\",\r\n  TOGGLE: \"toggle\",\r\n  REMOVE: \"remove\",\r\n  ADD: \"add\",\r\n  CONTROL: \".-control\",\r\n\r\n  // Controller class constants\r\n  SHOWCLASS: \"-show\",\r\n  TXTCLASS: \".-txt\",\r\n  CLOSE: \"Close\",\r\n  TERMSANDCONDIIONS: \"Terms & Conditions\",\r\n  BANNERQUERY: \".-banner.-top img.lazy-image\",\r\n  DATASRC: \"data-src\",\r\n  KEYWORDS: [\"with\", \"and\", \"tv\"],\r\n\r\n  // Tabs class constants\r\n  TABQUERY: \".-tab\",\r\n  TABSQUERY: \".-all-tabs\",\r\n  TABSPARENTQUERY: \".-tabs\",\r\n  PREVQUERY: \".-control.-prev\",\r\n  NEXTQUERY: \".-control.-next\",\r\n  FIRSTTAB: \"first tab\",\r\n  ACTIVECLASS: \"active\",\r\n  DATATIME: \"data-time\",\r\n  NEXT: \"next\",\r\n  PREV: \"prev\",\r\n\r\n  // SKURows class constants\r\n  SKUSELQUERY: \".-skus\",\r\n  SKUROWCLASS: \"-sku_row -posrel\"\r\n}\r\n\r\nexport const fxn = {\r\n  idQuery: (query: string) => \"#initiative \" + query,\r\n  timeQuery: (time: number) => '.-sku_row[data-time=\"' + time + '\"]',\r\n  tabQuery: (time: number) => '.-tab[data-time=\"' + time + '\"]'\r\n}","import { IDomain, IRemoteConfig } from \"./interfaces/config\";\r\nimport { IPastAndFutureTimes } from \"./interfaces/others\";\r\nimport { constants, fxn } from \"./constants\";\r\nimport { ICampaignCalendar } from \"./interfaces/data\";\r\nimport { iConfig, iDynamicObject, iNames, iRemoteData } from \"./types/index\";\r\n\r\n// type TypeOrNull<T> = T | null;\r\n\r\nexport class Util {\r\n  private remoteData:iRemoteData;\r\n  private timeInterval:number = 0;\r\n  private currency: string;\r\n  private config: iConfig;\r\n  protected domain: string;\r\n  protected catalog: string;\r\n  protected el;\r\n  protected all;\r\n  private pad;\r\n  private capitalize;\r\n  protected isATab;\r\n  private midnight;\r\n  protected fbox;\r\n  protected isMobile = navigator.userAgent.toLowerCase().includes(\"mobi\")\r\n\r\n  constructor(remoteData: iRemoteData, fbox: any) {\r\n    this.remoteData = remoteData\r\n    this.currency = (this.remoteData.config as iConfig).currency\r\n    this.config = this.remoteData.config as iConfig\r\n    this.domain = this.remoteData.config?.domain as string\r\n    this.catalog = `${this.domain}/catalog/?shipped_from=country_local&seller_score=3-5&q=`\r\n    this.fbox = fbox\r\n\r\n    this.el = (query: string, parent?: HTMLElement) => parent ? parent.querySelector(fxn.idQuery(query)) as HTMLElement : document.querySelector(fxn.idQuery(query)) as HTMLElement\r\n    this.all = (query: string, parent?: HTMLElement) => parent ? parent.querySelectorAll(fxn.idQuery(query)) : document.querySelectorAll(fxn.idQuery(query))\r\n    this.pad = (time: number) => time.toString().length == 1 ? \"0\" + time : time\r\n    this.capitalize = (str: string) => str[0].toUpperCase() + str.slice(1)\r\n    this.isATab = (el: HTMLElement) => el.classList.contains(constants.TABCLASS) \r\n    this.midnight = (time: number | string) => +new Date(time).setHours(0, 0, 0, 0)\r\n  }\r\n\r\n  times(skus:ICampaignCalendar[]) {\r\n    const times = skus.map(sku => this.midnight(sku.time))\r\n    const uniqueTimes = Array.from(new Set(times))\r\n    return uniqueTimes.sort((a, b) => a - b)\r\n  }\r\n\r\n\r\n  timeUnits(time: number) {\r\n    const $date = new Date(time)\r\n    const day = $date.getDay()\r\n    const month = $date.getMonth()\r\n    const date = $date.getDate()\r\n    const hour = $date.getHours()\r\n    const mins = $date.getMinutes()\r\n\r\n    return { day, month, date, hour, mins }\r\n  }\r\n\r\n  twelveHrFormat(hour: number, mins: number) {\r\n    if (hour === 12) return `${this.pad(hour)}:${this.pad(mins)}${constants.PM}`\r\n    else if (hour > 12) return `${this.pad(hour - 12)}:${this.pad(mins)}${constants.PM}`\r\n    else if (hour === 0) return `12:${this.pad(mins)}${constants.AM}`\r\n    else return `${this.pad(hour)}:${this.pad(mins)}${constants.AM}`\r\n  }\r\n  \r\n  dayDiff(time: number) {\r\n    const timeDate = new Date(time).getDate()\r\n    return new Date().getDate() - timeDate\r\n  }\r\n\r\n  sameMonth(time: number) {\r\n    return new Date(time).getMonth() === new Date().getMonth()\r\n  }\r\n\r\n  date(time: number) {\r\n    const dayDiff = this.dayDiff(time)\r\n    if (dayDiff === 0 && this.sameMonth(time))\r\n      return this.capitalize(constants.TODAY)\r\n    else if (dayDiff === 1 && this.sameMonth(time))\r\n      return this.capitalize(constants.YESTERDAY)\r\n    else if (dayDiff === -1 && this.sameMonth(time))\r\n      return this.capitalize(constants.TOMORROW)\r\n    else return this.fullDate(time)\r\n  }\r\n\r\n  fullDate(time: number) {\r\n    const date = new Date(time)\r\n    const month = date.toLocaleDateString(\"en-US\", { month: \"short\" })\r\n    const day = date.toLocaleDateString(\"en-US\", { weekday: \"short\" })\r\n    return `${day} ${month} ${date.getDate()}`\r\n  }\r\n\r\n  toggle(toRemove: NodeListOf<Element>, toAdd: HTMLElement, className: string) {\r\n    toRemove.forEach(el => el.classList.remove(className))\r\n    toAdd.classList.add(className)\r\n  }\r\n\r\n  price(raw: string) {\r\n    const num = this.numFromStr(raw)\r\n    return `${this.currency} ${Number(num).toLocaleString()}`\r\n  }\r\n\r\n  numFromStr(str: string) {\r\n    const match = str.match(/\\d/g)\r\n    return match ? match.join(\"\") : 0\r\n  }\r\n\r\n  formatPrice(price: string) {\r\n\r\n    const pieces = price.split(\" \")\r\n    const value = Number(pieces[1].replace(\"₦\", \"\")) \r\n    if (isNaN(value)) return price\r\n\r\n    switch (this.config.currencyPosition) {\r\n      case constants.PREFIX:\r\n        return `Below ${this.currency} ${value.toLocaleString()}`\r\n      default:\r\n        return `Below ${value.toLocaleString()} ${this.currency}`\r\n    }\r\n  }\r\n\r\n  discount($old: string, $new: string) {\r\n    const diff = Number($old) - Number($new)\r\n    const ratio = diff * 100 / Number($old)\r\n    return !isNaN(ratio) ? `-${Math.round(ratio)}%` : \"\"\r\n  }\r\n\r\n  // continue from replace pattern\r\n  replacePattern(pattern: string | RegExp, str: string) {\r\n    const re = new RegExp(pattern, \"g\")\r\n    return str.replace(re, \"-\")\r\n  }\r\n\r\n  id(name: string, delim: string) {\r\n    const replaceApostrophe = this.replacePattern(\"'\", name)\r\n    const replaceAmpersand = this.replacePattern(\"&\", replaceApostrophe)\r\n    const replacePercent = this.replacePattern(\"%\", replaceAmpersand)\r\n    return replacePercent.toLowerCase().split(\" \").join(delim)\r\n  }\r\n\r\n  key(keyStr: string, obj: IRemoteConfig) {\r\n    type KeyType = keyof typeof obj\r\n    return keyStr as KeyType\r\n  }\r\n\r\n\r\n  timeFormat(time: number) {\r\n    const tUnits = this.timeUnits(time)\r\n    const t = this.twelveHrFormat(tUnits.hour, tUnits.mins)\r\n    return `${this.date(time)}'s ${t} sale`\r\n  }\r\n\r\n  show() {\r\n    let imageObserver = new this.fbox.ImageObserver()\r\n    imageObserver = null\r\n    return this\r\n  }\r\n\r\n  platform() {\r\n    const isMobile = 'ontouchstart' in window\r\n    const mBannerStr = constants.SHEETNAME + \"_mobile_banner\"\r\n    const dBannerStr = constants.SHEETNAME + \"_desktop_banner\"\r\n    const deeplinkStr = constants.SHEETNAME + \"_deeplink\"\r\n\r\n    const mBanner = this.config.mobileAppBanner\r\n    const dBanner = this.config.desktopBanner\r\n\r\n    const banner = isMobile ? mBanner : dBanner\r\n    \r\n    return { banner }\r\n  }\r\n\r\n  rating(average: number) {\r\n    return ((average / 5) * 100).toFixed(2) + '%'\r\n  }\r\n\r\n  productProperties(name: iNames) {\r\n    const names = name.displayName.split(\" \") as string[]\r\n    const len = names?.length as number\r\n    const properties = []\r\n    for (let i = 0; i < len; i++) {\r\n      const word = names[i].toLowerCase()\r\n      if (word.length < 2) continue\r\n      if (name.singularName.indexOf(word) > -1) continue\r\n      if (constants.KEYWORDS.indexOf(word) > -1) continue\r\n\r\n      const property = word.trim().replace(\")\", \"\").replace(\"(\", \"\")\r\n      properties.push(property)\r\n    }\r\n\r\n    return properties\r\n  }\r\n  randomize(list:any[]) {\r\n    return [...list].sort(() => Math.random() - 0.5)\r\n  }\r\n  pluralize(str: string) {\r\n    const lastCharacter = str[str.length - 1]\r\n    switch (lastCharacter) {\r\n      case 'y': return str.substring(0, str.length - 1) + 'ies'\r\n      case 's': return str\r\n      default: return str + 's'\r\n    }\r\n  }\r\n}","import { constants } from \"./constants\";\r\nimport { iRemoteData, iToast } from \"./types\";\r\nimport { Util } from \"./util\"; \r\n\r\nexport class Toast extends Util {\r\n\r\n  private toast: HTMLElement;\r\n  private toastMsg: HTMLElement;\r\n  private toastBtn: HTMLElement;\r\n\r\n  constructor(remoteData: iRemoteData, fbox: any) {\r\n    super(remoteData, fbox)\r\n\r\n    this.toast = this.el(constants.TOASTQUERY)\r\n    this.toastMsg = this.el(constants.TOASTMSGQUERY)\r\n    this.toastBtn = this.el(constants.TOASTBTNQUERY)\r\n\r\n    this.toastBtn.addEventListener(\"click\", () => {\r\n      this.removeClasses()\r\n      this.toast.classList.add(\"-hide\")\r\n    })\r\n  }\r\n\r\n  removeClasses() {\r\n    this.toast.classList.remove(\"success\")\r\n    this.toast.classList.remove(\"error\")\r\n  }\r\n  \r\n  setMessage({ type, message }: iToast) {\r\n    this.toast.classList.add(type)\r\n    this.toastMsg.textContent = message\r\n    this.toast.classList.remove(\"-hide\")\r\n    if (type === constants.SUCCESS) {\r\n      setTimeout(() => {\r\n        this.removeClasses()\r\n        this.toast.classList.add(\"-hide\")\r\n      }, 5000)\r\n    }\r\n  }\r\n}","import { Toast } from \"./toast\";\r\nimport { iRemoteData } from \"./types/index\";\r\nimport { Util } from \"./util\";\r\n\r\nexport class Api extends Util{\r\n\r\n  private toast: Toast\r\n  constructor(remoteData: iRemoteData, fbox: any) {\r\n    super(remoteData, fbox)\r\n    this.toast = new Toast(remoteData, fbox)\r\n  }\r\n\r\n  \r\n  mobile(str: string) {\r\n    const start = str.indexOf('\"products\":')\r\n    const products = '{' + str.substring(start, str.length)\r\n    const eIdx = products.indexOf(',\"head\"')\r\n    return products.substring(0, eIdx - 1) + '}'\r\n  }\r\n\r\n\r\n  desktop(str: string) {\r\n    var start = str.indexOf('\"products\":')\r\n    var products = '{' + str.substring(start, str.length)\r\n    var closing_brace_indices = this.braceIndices(products, this.escape(\"}]\"))\r\n    var last_idx = closing_brace_indices[closing_brace_indices.length - 1]\r\n    return products.substring(0, last_idx + 2) + '}'\r\n  }\r\n\r\n  braceIndices(str: string, brace: string) {\r\n    var regex = new RegExp(brace, \"gi\"), result, indices = []\r\n    while ((result = regex.exec(str))) {\r\n      indices.push(result.index)\r\n    }\r\n    return indices\r\n  }\r\n\r\n  escape(str: string) {\r\n    return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\r\n  }\r\n  async products(url: string) {\r\n    let skus: any[] = []\r\n    try {\r\n      const response = await fetch(url)\r\n      const text = await response.text()\r\n      // const startIdx = text.indexOf('\"products\":[{')\r\n      // const productsStr = '{' + text.substring(startIdx, text.length)\r\n      // const closingBraces = this.braceIndices(productsStr, this.escapeStr(\"}]\"))\r\n      // const endIdx = closingBraces[closingBraces.length - 1]\r\n      // const products = productsStr.substring(0, endIdx + 2) + '}'\r\n      const products = this.isMobile ? this.mobile(text) : this.desktop(text)\r\n      const parsed = JSON.parse(products).products\r\n      skus = parsed\r\n      this.toast.setMessage({\r\n        type: \"success\",\r\n        message: `successfully fetched ${skus.length} products`\r\n      })\r\n    } catch (error: any) {\r\n      console.info(error)\r\n      this.toast.setMessage({\r\n        type: \"error\",\r\n        message: error.message\r\n      })\r\n      skus = []\r\n    }\r\n    return skus\r\n  }\r\n  \r\n  escapeStr(str: string) {\r\n    return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\r\n  }\r\n}","import { Api } from \"./api\";\r\nimport { constants } from \"./constants\";\r\nimport { Toast } from \"./toast\";\r\nimport { iAbout, iCategory, iNames, iProductFloorOptions, iRemoteData, iSKU } from \"./types/index\";\r\nimport { Util } from \"./util\";\r\n\r\nexport class Controller extends Util {\r\n  private tandcs: iAbout[]\r\n  private tandcsEl: HTMLElement\r\n  private hiwCTA: HTMLElement\r\n  private topBanner: HTMLElement\r\n  private mainEl: HTMLElement\r\n  private categories: iCategory[]\r\n  private productMap?: iSKU[]\r\n  private categoryMap: iCategory | undefined\r\n  private filters: string[]\r\n  private flipper: HTMLElement\r\n  // @ts-ignore\r\n  private controls: NodeList<Element>\r\n  private flipperBack: HTMLElement\r\n  private superblockTitle: HTMLElement\r\n  private switchBtn: HTMLElement\r\n  private selection: HTMLElement\r\n  private searchInput: HTMLInputElement\r\n  private api: Api \r\n\r\n  constructor(remoteData: iRemoteData, fbox: any) {\r\n    super(remoteData, fbox)\r\n\r\n    this.api = new Api(remoteData, fbox)\r\n    this.tandcs = remoteData.about as iAbout[]\r\n    this.categories = remoteData.categories as iCategory[]\r\n    this.productMap = []\r\n    this.filters = []\r\n    this.categoryMap = undefined \r\n\r\n    this.tandcsEl = this.el(constants.TANDCSQUERY)\r\n    this.hiwCTA = this.el(constants.HOWITWORKSQUERY)\r\n    this.topBanner = this.el(constants.TOPBANNERQUERY)\r\n    this.mainEl = this.el(constants.MAINELQUERY)\r\n    this.flipper = this.el(constants.FLIPPERQUERY)\r\n    this.flipperBack = this.el(constants.FLIPPERBACKQUERY)\r\n    this.switchBtn = this.el(constants.SWITCHQUERY)\r\n    this.selection = this.el(constants.SELECTIONQUERY)\r\n    this.superblockTitle = this.el(constants.SUPERBLOCKTITLEQUERY)\r\n    this.controls = this.all(constants.CONTROL)\r\n    this.searchInput = this.el(constants.SEARCHINPUTQUERY) as HTMLInputElement\r\n\r\n    this.hiwCTA.addEventListener(constants.CLICK, this.toggleBanner.bind(this))\r\n\r\n    this.fbox.pubsub.subscribe(constants.RESET, this.init.bind(this))\r\n\r\n    this.init()\r\n      .setBanner()\r\n      .displayTAndCs()\r\n      .show()\r\n      .listeners()\r\n  }\r\n\r\n  init() {\r\n    const randomized = this.randomize(this.categories)\r\n    this.mainEl.innerHTML = this.buildSuperblock(randomized)\r\n    this.flipper = this.el(constants.FLIPPERQUERY)\r\n    this.flipperBack = this.el(constants.FLIPPERBACKQUERY)\r\n    this.switchBtn = this.el(constants.SWITCHQUERY)\r\n    this.superblockTitle = this.el(constants.SUPERBLOCKTITLEQUERY)\r\n    this.searchInput = this.el(constants.SEARCHINPUTQUERY) as HTMLInputElement\r\n    this.controls = this.all(constants.CONTROL)\r\n\r\n    this.switchBtn.addEventListener('click', () => {\r\n      gtag('event', 'switch', {\r\n        'event_category': \"button\",\r\n        'event_label': \"switch button\",\r\n        'value': 1\r\n      });\r\n      this.flipElements(constants.TOGGLE)\r\n      this.positionAndUpdateAfterFlip()\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  flipElements(action: string) {\r\n    switch (action) {\r\n      case constants.TOGGLE:\r\n        [this.selection, this.flipper, ...this.controls].forEach((el: HTMLElement) => el.classList.toggle(\"-switch\"))\r\n        break;\r\n      case constants.REMOVE:\r\n        [this.selection, this.flipper, ...this.controls].forEach((el: HTMLElement) => el.classList.remove(\"-switch\"))\r\n        break;\r\n      default:\r\n        [this.selection, this.flipper, ...this.controls].forEach((el: HTMLElement) => el.classList.add(\"-switch\"))\r\n        break;\r\n    }\r\n  }\r\n\r\n  positionAndUpdateAfterFlip(str?: string) {\r\n    const showingSimilarProducts = this.flipper.classList.contains(\"-switch\")\r\n    const productFloorName = this.el(\".-head .-title-name\")\r\n    const productFloorDesc = this.el(\".-head .-title-desc\") \r\n\r\n    if (showingSimilarProducts) {\r\n      productFloorName.innerHTML = `More ${str ?? \"\"}`\r\n      productFloorDesc.innerHTML = \"\"\r\n    } else {\r\n      productFloorName.innerHTML = this.categoryMap?.plural_name as string\r\n      productFloorDesc.innerHTML = this.formatPrice(this.categoryMap?.price_point as string)\r\n    }\r\n\r\n    // this.superblockTitle.innerHTML = showingSimilarProducts ? `More ${str ?? \"\"}` : \"Categories\"\r\n    this.flipper.scrollTop = 0\r\n    this.flipper.scrollLeft = 0\r\n  }\r\n\r\n  listeners() {\r\n    this.mainEl.addEventListener(\"click\", this.handleClick.bind(this))\r\n    this.topBanner.addEventListener(\"click\", this.handleClick.bind(this))\r\n  }\r\n\r\n  handleClick(evt: Event) {\r\n    const target: HTMLElement = evt.target as HTMLElement\r\n\r\n    const type = target.getAttribute(\"data-type\") \r\n\r\n    switch (type) {\r\n      case constants.CATTYPE:\r\n        this.categoryBtnUpdate(target)\r\n        break;\r\n      case constants.DIRBTN:\r\n        this.handleDirection(target)\r\n        break;\r\n      case constants.ATC:\r\n        this.handleAddToCart(target)\r\n        break\r\n      case constants.COMPARE:\r\n        this.updateSelection(target)\r\n        break;\r\n      case constants.SELECTIONBTN:\r\n        this.btnFilterUpdate(target)\r\n        break;\r\n      case constants.SEARCHBTN:\r\n        this.searchBtnFilterUpdate(target)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n  }\r\n\r\n  handleAddToCart(target:HTMLElement) {\r\n    const sku = target.getAttribute(\"data-sku\")\r\n    const product = this.productMap?.find((product: iSKU) => product.sku === sku) \r\n    gtag('event', 'outflow_to_pdp', { \r\n      'event_label': sku,\r\n      'product_name': product?.displayName,\r\n      'product_url': product?.url,\r\n      'product_category_tree': product?.categories,\r\n      'product_brand': product?.brand,\r\n      'product_image': product?.image,\r\n      'product_seller_id': product?.sellerId,\r\n      'product_price': product?.prices.price,\r\n      'product_is_jumia_express': product?.isShopExpress,\r\n      'product_average_rating': product?.rating?.average,\r\n      'product_total_rating': product?.rating?.totalRatings,\r\n      'product_is_buyable': product?.isBuyable,\r\n      'event_title': sku,\r\n      'value': sku\r\n    });\r\n  }\r\n\r\n  handleDirection(target: HTMLElement) {\r\n    const direction = target.getAttribute(\"data-dir\")\r\n    const productfloor = target.parentElement\r\n    const scrollable = this.el(\".-product-scrollable\", productfloor as HTMLElement).parentElement \r\n    direction === constants.NEXT\r\n      ? this.scrollTonext(scrollable as HTMLElement)\r\n      : this.scrollToprev(scrollable as HTMLElement)\r\n      gtag('event', 'direction', { \r\n        'event_label': direction,\r\n        'value': 1\r\n      });\r\n  }\r\n\r\n  categoryBtnUpdate(target: HTMLElement) {\r\n    this.searchInput.value = \"\"\r\n    const category = target.getAttribute(\"data-category\")\r\n    this.updateProductFloor(category as string)\r\n    this.flipElements(constants.REMOVE)\r\n    gtag('event', 'category_filter', { \r\n      'event_label': category,\r\n      'value': 1\r\n    });\r\n  }\r\n\r\n  btnFilterUpdate(target: HTMLElement) {\r\n    const propName = target.getAttribute(\"data-name\")\r\n    const btn = target.parentElement\r\n    btn?.classList.toggle(\"active\")\r\n    gtag('event', 'product_filter', { \r\n      'event_label': propName,\r\n      'value': 1\r\n    });\r\n\r\n    if (btn?.classList.contains(\"active\")) {\r\n      this.filters.unshift(propName as string)\r\n    } else {\r\n      let str = this.filters.join(\"-\")\r\n      str = str.replace(propName as string, \"\")\r\n      const pieces = str.split(\"-\").filter((word: string) => word !== \"\")\r\n      this.filters = pieces\r\n    }\r\n\r\n    this.apiRequest()\r\n  }\r\n\r\n  searchBtnFilterUpdate(target: HTMLElement) {\r\n    const parent = target.parentElement\r\n    const searchValue = this.searchInput.value.toLowerCase().trim()\r\n    \r\n    gtag('event', 'search_filter', { \r\n      'event_label': searchValue,\r\n      'value': 1\r\n    });\r\n    if (searchValue.length > 0) {\r\n      this.updateFilters(searchValue)\r\n      const catObj: iCategory = {\r\n        approved: \"true\",\r\n        image: \"\",\r\n        plural_name: this.pluralize(searchValue),\r\n        price_point: \"top deals\",\r\n        singular_name: searchValue,\r\n        sku_count: \"0\",\r\n        skus: [],\r\n        url: \"\"\r\n      }\r\n\r\n      this.categoryMap = catObj\r\n\r\n      parent?.classList.add(constants.SEARCHING)\r\n      this.apiCall()\r\n        .then((data: iSKU[]) => {\r\n          parent?.classList.remove(constants.SEARCHING)\r\n          this.productMap = data\r\n          this.productFloorUiUpdate({\r\n            catObj,\r\n            desc: \"top deals\",\r\n            name: searchValue,\r\n            skus: data\r\n          })\r\n          this.flipElements(constants.REMOVE)\r\n        }).catch(err => parent?.classList.remove(constants.SEARCHING))\r\n\r\n    }\r\n  }\r\n\r\n  updateSelection(target: HTMLElement) {\r\n    const selection = this.selectionObject(target)\r\n\r\n    this.updateFilters(selection.singularName as string)\r\n    this.updateSelectionUi(selection)\r\n    this.flipAndPopulateSimilarProducts(selection)\r\n    \r\n    gtag('event', 'compare', {      \r\n      'event_label': selection.sku,\r\n      'product_name': selection?.displayName,\r\n      'product_url': selection?.url,\r\n      'product_category_tree': selection?.categories,\r\n      'product_brand': selection?.brand,\r\n      'product_image': selection?.image,\r\n      'product_seller_id': selection?.sellerId,\r\n      'product_price': selection?.prices.price,\r\n      'product_is_jumia_express': selection?.isShopExpress,\r\n      'product_average_rating': selection?.rating?.average,\r\n      'product_total_rating': selection?.rating?.totalRatings,\r\n      'product_is_buyable': selection?.isBuyable,\r\n      'event_title': selection.sku,\r\n      'value': selection.sku\r\n    });\r\n \r\n  }\r\n\r\n  updateFilters(name: string) {\r\n    this.filters = [name]\r\n  }\r\n\r\n  updateSelectionUi(selection: iSKU) {\r\n    const html = this.selectionHtml(selection)\r\n    const back = this.el(\".-back\", this.selection)\r\n    back.innerHTML = html\r\n    this.show()\r\n  }\r\n\r\n  flipAndPopulateSimilarProducts(selection: iSKU) {\r\n    this.flipSimilarProducts(selection)\r\n    this.apiRequest()\r\n  }\r\n\r\n  apiRequest() {\r\n    this.flipperBack.innerHTML = this.spinLoader()\r\n    this.apiCall()\r\n      .then(this.populateSimilarProducts.bind(this))\r\n  }\r\n\r\n  apiCall() {\r\n    const url = this.catalog + this.filters.join(\"+\")\r\n    return this.api.products(url)\r\n  }\r\n\r\n  flipSimilarProducts(selection: iSKU) {\r\n    this.flipElements(\"add\")\r\n    // const sfxn = this.selection.classList\r\n    // const fFxn = this.flipper.classList\r\n\r\n    // !sfxn.contains(\"-switch\") && sfxn.add(\"-switch\")\r\n    // !fFxn.contains(\"-switch\") && fFxn.add(\"-switch\")\r\n\r\n    this.positionAndUpdateAfterFlip(selection.pluralName)\r\n  }\r\n\r\n  populateSimilarProducts(data: iSKU[]) { \r\n    this.flipperBack.innerHTML = data.map(this.skuHtmlHorizontal.bind(this)).join(\"\")\r\n    this.show()\r\n  }\r\n\r\n  selectionObject(target: HTMLElement) {\r\n    const singularName = (target.getAttribute(\"data-singular-name\") as string).toLowerCase()\r\n    const pluralName = (target.getAttribute(\"data-plural-name\") as string).toLowerCase()\r\n    const sku = target.getAttribute(\"data-sku\")\r\n    const skuObj = this.productMap?.find((product: iSKU) => product.sku === sku) as iSKU\r\n    const names: iNames = { displayName: skuObj.displayName, singularName }\r\n    skuObj.properties = this.productProperties(names)\r\n    skuObj.singularName = singularName\r\n    skuObj.pluralName = pluralName\r\n    return skuObj\r\n  }\r\n\r\n  oldPriceAndDiscount(selection: iSKU) {\r\n    return `<div class=\"-price -old\">${selection.prices.oldPrice}</div><div class=\"-discount\">${selection.prices.discount}</div>`\r\n  }\r\n\r\n  discountHtml(selection: iSKU) {\r\n    return `<div class=\"-discount\">${selection.prices.discount}</div>`\r\n  }\r\n\r\n  selectionHtml(selection: iSKU) {\r\n\r\n    const btnHtml = selection.properties?.map(this.btnHtml.bind(this)).join(\"\")\r\n\r\n    const oldPriceAndDiscount = selection.prices.oldPrice ? this.oldPriceAndDiscount(selection) : \"\"\r\n\r\n    const brand = selection.brand ? `<div class=\"-brand\">Brand: ${selection.brand}</div>` : \"\"\r\n    const express = selection.isShopExpress ? '<div class=\"-express -list -posrel\"><express></express></div>' : ''\r\n\r\n    const mainBadge = selection.badges?.main ? `<a class=\"-badge -main -official-store\" target=\"_blank\" href=\"${selection.badges.main.url}\">Official Store</a>` : ''\r\n\r\n    const campBadge = selection.badges?.campaign ? `<a class=\"-badge -campaign\" target=\"_blank\" href=\"${selection.badges.campaign.url}\"><img src=\"${selection.badges.campaign.image}\" alt=\"campaign badge\"/></a>` : ''\r\n    \r\n    const rating = selection.rating ? `<div class=\"-product_rating\"><div class=\"-stars -radio-el -posrel -inlineblock -vamiddle\"><div class=\"-in\" style=\"width:${this.rating(selection.rating.average)}\"></div></div><div class=\"-count -inlineblock -vabaseline -posrel\"><div class=\"-rt\">(${selection.rating.totalRatings})</div></div></div>` : ''\r\n\r\n    const rightImage = this.isMobile ? \"\" : `<a href=\"${selection.url}\" target=\"_blank\" class=\"-img -posrel\"><span class=\"-posabs -preloader -hide\"></span><img class=\"lazy-image\" data-src=\"${selection.image}\" alt=\"sku_img\"></a>`\r\n\r\n    return `<div class=\"-sku -posrel\" data-sku=\"${selection.sku}\"><a href=\"${selection.url}\" target=\"_blank\" class=\"-img -posrel\"><span class=\"-posabs -preloader -hide\"></span><img class=\"lazy-image\" data-src=\"${selection.image}\" alt=\"sku_img\"></a><div class=\"-details\"><div class=\"-detail-props\">${brand} <div class=\"-name\">${selection.displayName}</div>${express} <div class=\"-badges\">${mainBadge}${campBadge} </div>${rating} <div class=\"-prices\"><div class=\"-price -new\">${selection.prices.price}</div>${oldPriceAndDiscount} </div></div><div class=\"-btns\">${btnHtml}</div></div>${rightImage}</div>`\r\n  }\r\n\r\n  btnHtml(name: string) {\r\n    return `<div class=\"-btn -cta -posrel\"><div class=\"-btn-clickable -posabs\" data-name=\"${name}\" data-type=\"selection-btn\"></div><div class=\"-txt\">${name}</div></div>`\r\n  }\r\n\r\n  scrollTonext(scrollable: HTMLElement) {\r\n    var start = scrollable.scrollLeft + 80, end = scrollable.scrollLeft + 300\r\n    var delta = end - start;\r\n    scrollable.scrollLeft = start + delta * 1;\r\n  }\r\n\r\n  scrollToprev(scrollable: HTMLElement) {\r\n    var start = scrollable.scrollLeft - 80, end = scrollable.scrollLeft - 300\r\n    var delta = end - start;\r\n    scrollable.scrollLeft = start + delta * 1;\r\n  }\r\n\r\n  buildSuperblock(categories: iCategory[]) {\r\n    let superblockHtml = `<div class=\"-superblock\" data-name=\"selection\">`\r\n    const title = `<div class=\"-title\"><span class=\"-similar-products\">Categories</span></div>`\r\n    const freelinks = this.buildFreelinks(categories)\r\n    const productFloor = this.buildProductFloor(categories[0])\r\n\r\n    superblockHtml += productFloor\r\n    superblockHtml += title\r\n    superblockHtml += freelinks\r\n\r\n    return superblockHtml\r\n  }\r\n\r\n  buildFreelinks(categories: iCategory[]) {\r\n    let catHtml = '<div class=\"-cats -posrel -single\">'\r\n    const freelinks = categories.map(category => this.catHtml(category)).join(\"\")\r\n    // catHtml += categories.length > 0 ? `<div class=\"-scrollable -front\">${freelinks}</div><div class=\"-back\"></div>` : \"\"\r\n    // catHtml += '</div>'\r\n    return `${catHtml}${freelinks}</div>`\r\n  }\r\n\r\n  catHtml(category: iCategory) {\r\n    return `<div class=\"-cat -posrel\" data-category=\"${category.plural_name}\" data-url=\"${category.url}\" ><span class=\"-posabs -preloader -loading\"></span><div class=\"-clickable -posabs\" data-type=\"category\" data-category=\"${category.plural_name}\"></div><span class=\"-posabs -preloader -loading\" data-type=\"category\"></span><img class=\"lazy-image\" data-src=\"${category.image}\" alt=\"${category.plural_name}\" /><div class=\"-posabs -name\"><div class=\"-txt -posabs -name-el\">${category.plural_name}</div><div class=\"-bg -posabs -name-el\"></div></div><div class=\"-price-point\">${this.formatPrice(category.price_point)}</div></div>`\r\n  }\r\n\r\n  buildProductFloor(category: iCategory) {\r\n    this.categoryMap = category\r\n    const prevNextButtons = this.isMobile ? '' : '<div class=\"-control -prev -posabs\" data-dir=\"prev\" data-type=\"dir-btn\"><span class=\"-posabs -preloader -loading\"></span></div><div class=\"-control -next -posabs\"  data-type=\"dir-btn\" data-dir=\"next\"><span class=\"-posabs -preloader -loading\"></span></div>'\r\n\r\n    let html = `<div class=\"-productfloor active -posrel\" data-name=\"${category.plural_name}\">${prevNextButtons}`\r\n\r\n    html += `<div class=\"-head\"><div class=\"-search-form -posrel\"><button class=\"-switcher -cta\"><img src=\"https://ng.jumia.is/cms/0-1-initiatives/product-comparator/2023/flip-icon.png\" alt=\"flip icon\" /></button><input type=\"text\" class=\"-search-input\" placeholder=\"Search for products\" /><div class=\"-cta -search-btn -posabs\"><div class=\"-search-btn-clickable -posabs\" data-type=\"search-btn\"></div><div class=\"search-icon\"></div>${this.spinLoader()} </div></div><div class=\"-title\"><div class=\"-title-name\">${category.plural_name}</div><div class=\"-title-desc\">${this.formatPrice(category.price_point)}</div></div></div>`\r\n\r\n    const skus = category.skus.map((sku: iSKU) => this.skuHtml(sku, category)).join(\"\")\r\n    this.productMap = category.skus\r\n\r\n    html += `<div class=\"-flipper -posrel\"><div class=\"-scrollable -front\"><div class=\"-skus -actual\"><div class=\"-product-scrollable\">${skus}</div></div></div><div class=\"-back\"></div></div>` \r\n    return html + '</div>'\r\n  }\r\n\r\n  skuHtmlHorizontal(sku: iSKU) {\r\n\r\n    const express = sku.isShopExpress ? '<div class=\"-express -list -posrel\"><express></express></div>' : ''\r\n    const officialStore = sku.badges?.main ? '<span class=\"-badge -main -official-store\">Official Store</span>' : ''\r\n\r\n    const rating = sku.rating ? `<div class=\"-product_rating\"><div class=\"-stars -radio-el -posrel -inlineblock -vamiddle\"><div class=\"-in\" style=\"width:${this.rating(sku.rating.average)}\"></div></div><div class=\"-count -inlineblock -vabaseline -posrel\"><div class=\"-rt\">(${sku.rating.totalRatings})</div></div></div>` : ''\r\n\r\n    const discount = sku.prices.oldPrice ? this.discountHtml(sku) : \"\"\r\n\r\n    return `<div class=\"-sku -posrel -available\" data-sku=\"${sku.sku}\"><a href=\"${sku.url}\" target=\"_blank\" class=\"-img -posrel\"><span class=\"-posabs -preloader -hide\"></span><img class=\"lazy-image loaded\" data-src=\"${sku.image}\" alt=\"sku_img\" data-type=\"atc\" data-sku=\"${sku.sku}\" /></a><div class=\"-details\"><div class=\"-name\">${sku.displayName}</div><div class=\"-features\">${express} ${officialStore} ${rating} </div><div class=\"-prices\"><div class=\"-price -new\">${sku.prices.price}</div>${discount} </div></div><a href=\"${sku.url}\" target=\"_blank\" class=\"-cta -buy -posabs\" data-type=\"atc\" data-sku=\"${sku.sku}\">buy</a></div>`\r\n  }\r\n\r\n  skuHtml(skuObj: iSKU, category: iCategory) {\r\n    const {\r\n      sku, displayName,\r\n      url, prices: { price, discount },\r\n      image\r\n    } = skuObj\r\n    const discountHtml = discount ? `<div class=\"-discount\">${discount}</div>` : \"\"\r\n\r\n    return `\r\n    <div data-sku=\"${sku}\" class=\"-posrel -sku\"><a href=\"${url}\" class=\"-img -posrel\" target=\"_blank\"><span class=\"-posabs -preloader -loading\"></span><img class=\"lazy-image\" data-src=\"${image}\" alt=\"${displayName}\"  data-type=\"atc\" data-sku=\"${sku}\" /></a><div class=\"-details\"><div class=\"-name\">${displayName}</div><div class=\"-prices\"><div class=\"-new -price\">${price}</div>${discountHtml} </div><div class=\"-atc-compare\"><a href=\"${url}\" target=\"_blank\" class=\"-cta -atc\" data-type=\"atc\" data-sku=\"${sku}\">Add to cart</a><a href=\"#initiative\" class=\"-cta -compare\" data-sku=\"${sku}\" data-singular-name=\"${category.singular_name}\" data-plural-name=\"${category.plural_name}\" data-type=\"compare\">Compare</a></div></div></div>\r\n    `\r\n  }\r\n  updateProductFloor(category: string) {\r\n    const catObj = this.categories.find(cat => cat.plural_name === category)\r\n    const skus = catObj?.skus\r\n    this.productMap = catObj?.skus\r\n    this.categoryMap = catObj\r\n\r\n    this.productFloorUiUpdate({\r\n      catObj: catObj as iCategory,\r\n      desc: this.formatPrice(catObj?.price_point as string),\r\n      name: category,\r\n      skus: skus as iSKU[]\r\n    })\r\n  }\r\n\r\n  productFloorUiUpdate(options: iProductFloorOptions) {\r\n    const { name, desc, catObj, skus } = options\r\n    const productFloor = this.el(\".-productfloor\")\r\n    const productFloorTitle = this.el(\".-productfloor .-title\")\r\n    productFloorTitle.innerHTML = `<div class=\"-title-name\">${name}</div><div class=\"-title-desc\">${desc}</div>`\r\n    const actual = this.el(\".-skus.-actual\", productFloor)\r\n    const skusHtml = skus?.map((sku: iSKU) => this.skuHtml(sku, catObj as iCategory)).join(\"\")\r\n    actual.innerHTML = `<div class=\"-product-scrollable\">${skusHtml}</div>`\r\n    this.show()\r\n  }\r\n\r\n  spinLoader() {\r\n    return '<div aria-label=\"spinloader\" class=\"spin-loader\"></div>'\r\n  }\r\n\r\n  toggleBanner() {\r\n    this.topBanner.classList.toggle(constants.SHOWCLASS)\r\n    const hiwText = this.hiwCTA.querySelector(constants.TXTCLASS) as HTMLElement\r\n    hiwText.textContent = hiwText?.textContent === constants.TERMSANDCONDIIONS\r\n      ? constants.CLOSE : constants.TERMSANDCONDIIONS\r\n  }\r\n\r\n  setBanner() {\r\n    const bannerImage = this.el(constants.BANNERQUERY)\r\n    bannerImage.setAttribute(constants.DATASRC, this.platform().banner)\r\n    return this\r\n  }\r\n\r\n  displayTAndCs() {\r\n    this.tandcsEl.innerHTML = this.tandcs.map(this.tandcHTML.bind(this)).join(\"\")\r\n    return this\r\n  }\r\n\r\n  tandcHTML(tandc: iAbout) {\r\n    return `<div class=\"-rule_element\"><div class=\"-vatop -num\">${tandc.num}</div><div class=\"-vatop -desc\"><div class=\"-question\">${tandc.question}</div><div class=\"-answer\">${tandc.answer}</div></div></div>`\r\n  }\r\n}","import { config, constants, gfConfig } from \"./core/constants\";\r\nimport { Controller } from \"./core/controller\"; \r\nimport { iRemoteData } from \"./core/types/index\";\r\nimport { Util } from \"./core/util\"; \r\n\r\nstart()\r\n\r\nfunction start() {\r\n\r\n  const wind = window as any\r\n\r\n  const gtag = wind.gtag\r\n  // Note: \"about\" in the line below is important to prevent fetch of config document\r\n  const fbox = wind.Featurebox({ config }, \"about\") \r\n  \r\n  const databaseOperations = () => {\r\n    const database = new fbox.Database(gfConfig)\r\n    database.getAll(constants.COLLECTION, constants.DOCSEVENT)\r\n  }\r\n  \r\n  databaseOperations() \r\n  \r\n  fbox.pubsub.subscribe(constants.DOCSEVENT, (data: any) => {\r\n    let remoteData = {\r\n      categories: [],\r\n      about: [],\r\n      config: {\r\n        countryLocale: \"\",\r\n        desktopBanner: \"\",\r\n        mobileAppBanner: \"\",\r\n        mlp: \"\",\r\n        currency: \"\",\r\n        domain: \"\",\r\n        currencyPosition: \"\"\r\n      }\r\n    }\r\n    \r\n    const keys = Object.keys(data)\r\n    keys.map(key => {\r\n      switch (key) {\r\n        case constants.ABOUT: remoteData.about = data[key].list\r\n          break;\r\n        case constants.CONFIG: remoteData.config = data[key]\r\n          break;\r\n        default: remoteData.categories = data[key].list\r\n          break;\r\n      }\r\n    })\r\n    new Controller(remoteData, fbox)\r\n  })\r\n  \r\n}\r\n\r\n\r\n// fbox.pubsub.subscribe(fbox.FETCHED_DATA, (data: any) => {\r\n//   // const remoteData:IRemoteData = data as IRemoteData\r\n//   // controller = new Controller(remoteData, fbox)\r\n//   // const calendar:any[] = controller.getData(constants.NAME)\r\n//   // const times: number[] = controller.times(calendar)\r\n//   // console.log(\"data is\", data)\r\n// })"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","gfConfig","constants","COLLECTION","DOCSEVENT","ABOUT","CONFIG","SEEALL","SHEETNAME","NAME","TANDCS","FOCUS","BUILD","RESET","TABLISTENER","INSESSION","AFTERSESSION","BTWORB4SESSION","TIMESLOTSTODISPLAY","SKUROWQUERY","MAINELQUERY","FLIPPERQUERY","FLIPPERBACKQUERY","SUPERBLOCKTITLEQUERY","TOASTQUERY","TOASTMSGQUERY","TOASTBTNQUERY","SUCCESS","SWITCHQUERY","SELECTIONQUERY","SEARCHINPUTQUERY","LIVECLASS","SEARCHING","OOSCLASS","TABCLASS","CATTYPE","DIRBTN","ATC","COMPARE","SELECTIONBTN","SEARCHBTN","AM","PM","TODAY","YESTERDAY","TOMORROW","PREFIX","FREE","INITIATIVE","TANDCSQUERY","HOWITWORKSQUERY","TOPBANNERQUERY","FROMSTART","CLICK","TOGGLE","REMOVE","ADD","CONTROL","SHOWCLASS","TXTCLASS","CLOSE","TERMSANDCONDIIONS","BANNERQUERY","DATASRC","KEYWORDS","TABQUERY","TABSQUERY","TABSPARENTQUERY","PREVQUERY","NEXTQUERY","FIRSTTAB","ACTIVECLASS","DATATIME","NEXT","PREV","SKUSELQUERY","SKUROWCLASS","fxn","query","Util","constructor","remoteData","fbox","timeInterval","isMobile","navigator","userAgent","toLowerCase","includes","this","currency","domain","catalog","el","parent","querySelector","document","all","querySelectorAll","pad","time","toString","length","capitalize","str","toUpperCase","slice","isATab","classList","contains","midnight","Date","setHours","times","skus","map","sku","Array","from","Set","sort","a","b","timeUnits","$date","day","getDay","month","getMonth","date","getDate","hour","getHours","mins","getMinutes","twelveHrFormat","dayDiff","timeDate","sameMonth","fullDate","toLocaleDateString","weekday","toggle","toRemove","toAdd","className","forEach","remove","add","price","raw","num","numFromStr","Number","toLocaleString","match","join","formatPrice","pieces","split","value","replace","isNaN","currencyPosition","discount","$old","$new","ratio","Math","round","replacePattern","pattern","re","RegExp","id","name","delim","replaceApostrophe","replaceAmpersand","key","keyStr","obj","timeFormat","tUnits","t","show","imageObserver","ImageObserver","platform","window","mBanner","mobileAppBanner","dBanner","desktopBanner","banner","rating","average","toFixed","productProperties","names","displayName","len","properties","i","word","singularName","indexOf","property","trim","push","randomize","list","random","pluralize","substring","Toast","super","toast","toastMsg","toastBtn","addEventListener","removeClasses","setMessage","type","message","textContent","setTimeout","Api","mobile","start","products","eIdx","desktop","closing_brace_indices","braceIndices","escape","last_idx","brace","result","regex","indices","exec","index","url","response","fetch","text","JSON","parse","error","console","info","escapeStr","Controller","api","tandcs","about","categories","productMap","filters","categoryMap","undefined","tandcsEl","hiwCTA","topBanner","mainEl","flipper","flipperBack","switchBtn","selection","superblockTitle","controls","searchInput","toggleBanner","bind","pubsub","subscribe","init","setBanner","displayTAndCs","listeners","randomized","innerHTML","buildSuperblock","gtag","flipElements","positionAndUpdateAfterFlip","action","showingSimilarProducts","productFloorName","productFloorDesc","plural_name","price_point","scrollTop","scrollLeft","handleClick","evt","target","getAttribute","categoryBtnUpdate","handleDirection","handleAddToCart","updateSelection","btnFilterUpdate","searchBtnFilterUpdate","product","find","brand","image","sellerId","prices","isShopExpress","totalRatings","isBuyable","direction","productfloor","parentElement","scrollable","scrollTonext","scrollToprev","category","updateProductFloor","propName","btn","unshift","filter","apiRequest","searchValue","updateFilters","catObj","approved","singular_name","sku_count","apiCall","then","data","productFloorUiUpdate","desc","catch","err","selectionObject","updateSelectionUi","flipAndPopulateSimilarProducts","html","selectionHtml","flipSimilarProducts","spinLoader","populateSimilarProducts","pluralName","skuHtmlHorizontal","skuObj","oldPriceAndDiscount","oldPrice","discountHtml","btnHtml","express","mainBadge","badges","main","campBadge","campaign","rightImage","delta","superblockHtml","freelinks","buildFreelinks","buildProductFloor","catHtml","prevNextButtons","skuHtml","officialStore","cat","options","productFloor","actual","skusHtml","hiwText","setAttribute","tandcHTML","tandc","question","answer","wind","Featurebox","Database","getAll","countryLocale","mlp","Object","keys"],"sourceRoot":""}